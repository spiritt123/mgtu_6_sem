\documentclass{bmstu}
\usepackage{xparse}
\usepackage{amssymb}


\makeatletter %%%%% <---- Starting chapter without a pagebreak
\renewcommand\chapter{\par%
\thispagestyle{plain}% \global\@topnum\z@
\@afterindentfalse \secdef\@chapter\@schapter}
\makeatother

\usepackage{graphicx}
\begin{document}

\makereporttitle
    {Информатика и системы управления} % Название факультета
    {Компьютерные системы и сети} % Название кафедры
    {09.03.01 ПРИКЛАДНАЯ ИНФОРМАТИКА} % направение
    {лабораторной работе №~2} % Название работы (в дат. падеже)
    {Обработка внешних прерываний в микроконтроллерах AVR} % Тема работы
    {Микропроцессорные системы} % Название курса (необязательный аргумент)
    {19} % Номер варианта (необязательный аргумент)
    {ИУ6-62Б} % Номер группы
    {
    	{ИУ6-62Б}
    	{А.Е.Медведев} % ФИО студента
    	{Б.И. Бычков} % ФИО преподавателя
    } 
    
\chapter{Цель работы:}
\begin{itemize}
\item[--] изучение системы прерываний микроконтроллеров AVR,
\item[--] освоение системы команд микроконтроллеров AVR,
\item[--] ознакомление с работой стека при вызове подпрограмм и обработчиков прерываний,
\item[--] программирование внешних прерываний.  
\end{itemize}

\chapter{Задания:}
\section{Задание 1}
Запустив AVR Studio, проверить работу программы в шаговом режиме. С целью ускорения отладки сократить время задержек до минимума. Проконтролировать работу стека при вызове подпрограмм delay1, delay2.
\includelisting
	{demo1.asm}
	{Код реализации прерывания на плате ATmega8515}

При вызове подпрограммы или функции в тек помещется адрес возврата. По условию задания начало стека установлена в конец секции данных. Работы стека продемонстрирована на рисунке \ref{img:demo2_1.png}
\includeimage
    {demo2_1.png} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
    {f} % Обтекание (без обтекания)
    {H} % Положение рисунка (см. figure из пакета float)
    {1\textwidth} % Ширина рисунка
    {Состояние стека при пызове подпрограммы или функции} 


\section{Задание 2}
Вносим изменения  и дополнения в исходный текст программы 2.1, касающиеся обработки прерываний. На этапе инициализации указываются область стека для сохранения адресов возврата, при необходимости адреса векторов прерываний и сами векторы, маска прерываний, общее разрешение прерываний. Завершаем инициализацию переводом процессора в фоновый режим ожидания:

\includelisting
	{demo1.asm}
	{Код реализации прерывания на плате ATmega8515}

Состояние регистров и стека продемонстрировано на рисунках \ref{img:demo2_2.png} --- \ref{img:demo2_2_r.png}.
\includeimage
    {demo2_2.png} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
    {f} % Обтекание (без обтекания)
    {H} % Положение рисунка (см. figure из пакета float)
    {1\textwidth} % Ширина рисунка
    {Состояние стека при пызове подпрограммы или функции} 

\includeimage
    {demo2_2_r.png} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
    {f} % Обтекание (без обтекания)
    {H} % Положение рисунка (см. figure из пакета float)
    {0.5\textwidth} % Ширина рисунка
    {Состояние регистров} 

\section{Задание 3}
Изменить программу для микроконтроллера ATMega8515, заменив прерывание INT0 на INT2.

\includelisting
	{lab2.txt}
	{Код реализации прерывания на плате ATmega8515}

На рисунке \ref{img:lab2.png} продемонстрировано сотояние программы в процессе отладки. На данном рисунке можно отпределить работу стека, изменения состояния регистров и флагов.

\includeimage
    {lab2.png} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
    {f} % Обтекание (без обтекания)
    {H} % Положение рисунка (см. figure из пакета float)
    {1\textwidth} % Ширина рисунка
    {Состояние программы в процессе отладки} 

\newpage
\section{Задание 4}
Запустив программу Proteus ISIS, собрать проект, включающий микроконтроллер, 2 кнопки и 8 светодиодов.

\includeimage
    {lab2_pr.png} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
    {f} % Обтекание (без обтекания)
    {H} % Положение рисунка (см. figure из пакета float)
    {1\textwidth} % Ширина рисунка
    {Схема препываний в протеусе} % Подпись рисунка

\chapter{Вывод:}
В ходел лабораторной работы были изучены прерывание микроконтроллера самейства ATx8515.

\end{document}
\begin{comment}
На~рисунке~\ref{img:tux} символ семейства Unix-подобных операционных систем Linux.
Он отличается от~<<обычных>> пингвинов желтым цветом клюва и~лап.

\includeimage
    {tux} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
    {f} % Обтекание (без обтекания)
    {h} % Положение рисунка (см. figure из пакета float)
    {0.25\textwidth} % Ширина рисунка
    {Символ Linux (Tux)} % Подпись рисунка

На~листингах представлен исходный код программы Hello World на~языке программирования C в~двух вариантах оформления.

\includelisting
    {main.c} % Имя файла с расширением (файл должен быть расположен в директории inc/lst/)
    {Исходный код программы Hello World} % Подпись листинга

\includelistingpretty
    {main.c} % Имя файла с расширением (файл должен быть расположен в директории inc/lst/)
    {c} % Язык программирования (необязательный аргумент)
    {Исходный код программы Hello World} % Подпись листинга



\end{comment}
